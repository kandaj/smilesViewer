{"version":3,"sources":["../../src/js/app.js"],"names":["AppViewModel","app","fileInvalid","ko","observable","fileInfo","xyzCoordinates","loader","clearData","model","e","preventDefault","reader","abort","acceptDrop","files","dataTransfer","FileReader","onload","text","result","trim","vaildateFile","name","onerror","event","alert","target","error","readAsText","dragover","stopPropagation","lines","split","length","console","log","getCoordinates","then","generate3DModel","smiles","btoa","url","axios","get","res","ctab","data","catch","err","containerId","canvasId","resolution","generateModel"],"mappings":"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","file":"app.js","sourcesContent":["function AppViewModel() {\n    let app = this\n    this.fileInvalid = ko.observable();\n    this.fileInfo = ko.observable();\n    this.xyzCoordinates = ko.observable(\"\");\n    this.loader = ko.observable(\"\");\n    this.clearData = (model, e) => {\n        e.preventDefault();\n        this.reader.abort()\n        this.xyzCoordinates(\"\")\n        this.fileInfo(\"\")\n        this.fileInvalid(\"\")\n    }\n    this.acceptDrop = (model, e) => {\n        let files = e.dataTransfer.files;\n        let reader = new FileReader(model);\n        app.reader = reader\n        reader.onload = function () {\n            let text = reader.result.trim();\n            app.vaildateFile(text)\n            app.fileInfo('remove ' + files[0].name)\n        };\n        reader.onerror = (event) => {\n            alert(event.target.error.name);\n        };\n\n        reader.readAsText(files[0]);\n\n    };\n\n    this.dragover = (model, e) => {\n        e.stopPropagation();\n        e.preventDefault();\n    }\n\n    this.vaildateFile = (text) => {\n        const lines = text.split(/\\r\\n|\\n|\\s/);\n        !lines[0] || lines.length > 1 ? this.fileInvalid(true) : this.fileInvalid(false)\n        if (!app.fileInvalid()) {\n            this.loader(true)\n            console.log(`SMILES${text}`)\n            this.getCoordinates(text).then(data => {\n                this.generate3DModel()\n                this.loader(false)\n            })\n        } else {\n            this.xyzCoordinates(\"\")\n        }\n    }\n\n    this.getCoordinates = (text) => {\n        const smiles  = btoa(text)\n        let url = `https://www.ebi.ac.uk/chembl/api/utils/smiles2ctab/${smiles}`\n        return axios.get(url)\n            .then((res) => {\n                const ctab = btoa(res.data)\n                let url = `https://www.ebi.ac.uk/chembl/api/utils/ctab2xyz/${ctab}`\n                return axios.get(url);\n            })\n            .then((res) => {\n                return this.xyzCoordinates(res.data)\n            })\n            .catch((err) => {\n                console.log(err)\n            });\n    }\n\n    this.generate3DModel = () => {\n        let data = {\n            containerId: 'renderContainer',\n            canvasId: 'renderCanvas',\n            resolution: 300,\n            xyzCoordinates: this.xyzCoordinates()\n        }\n        generateModel(data);\n    }\n}"]}